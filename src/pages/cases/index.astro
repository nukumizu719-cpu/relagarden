---
// /cases/ にアクセスが来たら、1ページ目の内容をそのまま表示する設定
import { getCollection } from 'astro:content';
import PageContent from './[page].astro'; // [page].astroをコンポーネントとして読み込む

const allCases = await getCollection('cases');
const sortedCases = allCases.sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);

// 1ページ目のデータを擬似的に作成して渡す
const pageSize = 9;
const page = {
  data: sortedCases.slice(0, pageSize),
  url: {
    prev: undefined,
    next: sortedCases.length > pageSize ? "/cases/2/" : undefined,
  },
  currentPage: 1,
  lastPage: Math.ceil(sortedCases.length / pageSize),
};
---

<PageContent page={page} />